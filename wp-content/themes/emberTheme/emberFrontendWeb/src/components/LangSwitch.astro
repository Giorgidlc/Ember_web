---
export interface Props {
  lang: 'es' | 'en';
}

const { lang } = Astro.props;
const { pathname } = Astro.url; 

const otherLang = lang === 'es' ? 'en' : 'es';
const otherLangLabel = lang === 'es' ? 'EN' : 'ES';

let otherPath = '/';

if (lang === 'es') {
  // Estamos en 'es', queremos ir a 'en'.
  // 'pathname' es /proyectos/ -> queremos /en/proyectos/
  // 'pathname' es / (homepage) -> queremos /en/
  otherPath = `/${otherLang}${pathname}`; // AÃ±ade /en/ al path actual

} else {
  // Estamos en 'en', queremos ir a 'es'.
  // 'pathname' es /en/proyectos/ -> queremos /proyectos/
  // 'pathname' es /en/ (homepage) -> queremos /
  otherPath = pathname.replace(`/${lang}/`, '/'); // Quita /en/ del path
}
---

<a href={otherPath} class="lang-switch" hreflang={otherLang}>
  {otherLangLabel}
</a>

<style>

  .lang-switch {
    font-weight: bold;
    text-decoration: none;
    padding: 0.5em 0.75em;
    border: 1px solid transparent;
    border-radius: 4px;
    color: var(--color-base, black); 
  }
  .lang-switch:hover {
    background-color: rgba(255, 255, 255, 0.1);
  }
</style>