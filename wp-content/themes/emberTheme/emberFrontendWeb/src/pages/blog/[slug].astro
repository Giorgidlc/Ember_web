---
import BlogLayout from "@/layouts/BlogLayout.astro";
import { getAllSlugPosts, getPostBySlug } from "@/libs/apiWP";



export async function getStaticPaths() {
  const slugs = await getAllSlugPosts({});
  return slugs.map((slug: string) => ({
    params: { slug }
  }));
}

const { slug } = Astro.params;

const post = await getPostBySlug(slug);
if (!post) {
  return Astro.redirect("/404");
}
---
<BlogLayout 
  slug={slug}
  pageTitle={post.postTitle}
  heroTitle={post.heroTitle}
  heroDescription={post.heroDescription}
>
  <article>
    <div class="main-blog" set:html={post.postContent} />
  </article>
</BlogLayout>


<style>

  article {
    min-block-size: 50dvb;
  }

  article .main-blog {
    max-inline-size: 1440px;
    margin-inline: auto;
    padding-inline: var(--space-inline);
    padding-block: var(--space-block);
    color: var(--color-contrast-2);
    font-size: var(--fontSize-medium);
    white-space: pre-line;

    > p:has(img) {
      display: flex;
      width: 100%;
      height: 35%;
      overflow: hidden;

      > img {
        flex: 1;
        object-fit: cover;
        min-width: 100%;
        aspect-ratio: 16/9;
        height: auto;
      }
    }
  }

 
</style>